# Using Matomo Tag Manager with the Matomo Magento 2 Module

This describes how you can set up the tag manager to track events through Matomo Ecommerce tracking.
Essentially, Ecommerce events generated by the Magento 2 module are forwarded to the Matomo events.

First make sure to set the configuration *Enable Matomo Tag Manager Container* to yes and set the *Container Script Path*.

## Configuring triggers

In the Matomo Tag manager container, configure all the necessary triggers.

Repeat the steps below for the four events

* `setEcommerceView`
* `addEcommerceItem`
* `trackEcommerceCartUpdate`
* `trackEcommerceOrder`

### Steps to configure each trigger event

1. Go to *Trigger*
2. Click create new trigger
3. Click custom event 
4. Name and Event name should be the same
   
### Steps to configure the ecommerce tag

1. Go to *Tags*
2. Click *Create New Tag*
3. Choose *Custom HTML*
4. Name "Universal Ecommerce Tag for Matomo" (or choose your own)
5. HTML
    ```
    <script>
    window._paq = window._paq || [];
    var parameters = {{parameters}};
    var data = [{{customEventMatch}}].concat(parameters);
    console.log(data);
    window._paq.push(data);
    </script>
    ```

6. *Configure when the tag should do this*, choose all the events from above, one by one
7. Save tag
